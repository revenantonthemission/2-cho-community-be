"""config.py: 부하 테스트 설정.

계정 패턴, 대기 시간, 콘텐츠 템플릿 등 모든 설정을 한 곳에서 관리합니다.
seed_data.py가 생성한 계정 패턴(user{i}@example.com / Test1234!)을 사용합니다.
"""

# ── 계정 설정 ──────────────────────────────────────────────
# seed_data.py 기준: user1@example.com ~ user10000@example.com
# 동시 사용자 수보다 넉넉하게 확보 (200명 + 여유분)
ACCOUNT_EMAIL_PATTERN = "user{}@example.com"  # {} = 1, 2, 3, ...
ACCOUNT_PASSWORD = "Test1234!"
ACCOUNT_START_INDEX = 1
ACCOUNT_COUNT = 250  # 동시 200명 + 여유 50

# ── 요청 타임아웃 (초) ──────────────────────────────────────
# Lambda 콜드 스타트 고려: VPC ENI 프로비저닝 + SSM 시크릿 조회로 3-10초 지연 가능
REQUEST_TIMEOUT = 15

# ── 사용자 행동 대기 시간 (초) ─────────────────────────────
# Locust between(min, max): 균등 분포로 태스크 간 대기
READER_WAIT = (1, 3)     # 독자: 빠르게 페이지 넘김
WRITER_WAIT = (8, 20)    # 작성자: 글 작성에 시간 소요 + Rate Limit 준수
ACTIVE_WAIT = (2, 5)     # 활성 사용자: 댓글/좋아요 인터랙션

# ── Rate Limit 재시도 대기 (초) ─────────────────────────────
# POST /v1/auth/session = 5회/분/IP/Lambda인스턴스
# 429 발생 시 윈도우(60초)가 지나기를 기다린 후 재시도
LOGIN_RETRY_WAIT = 65

# ── 게시글 페이지네이션 ─────────────────────────────────────
POST_LIST_LIMIT = 10
POST_LIST_MAX_OFFSET = 50  # offset 0~50 랜덤

# ── 공유 게시글 ID 캐시 크기 ────────────────────────────────
# deque(maxlen)으로 자동 관리. 오래된 ID는 삭제된 게시글일 가능성 높음
SHARED_POST_STORE_MAX = 500

# ── 테스트 콘텐츠 ──────────────────────────────────────────
POST_TITLES = [
    "오늘 뭐 먹을지 추천해주세요",
    "주말에 뭐하시나요",
    "요즘 재밌는 드라마 있나요",
    "부하 테스트 중입니다 무시하세요",
    "커뮤니티 분위기 좋네요",
    "테스트 게시글입니다",
    "이런 곳이 있었다니 놀랍네요",
]

POST_CONTENTS = [
    "부하 테스트용 게시글입니다. 실제 사용자 행동을 시뮬레이션합니다.",
    "이 게시글은 Locust 부하 테스트 중 자동으로 작성되었습니다.",
    "커뮤니티 서비스 성능 측정을 위한 테스트 콘텐츠입니다.",
    "Lambda 콜드 스타트와 RDS 커넥션 풀 성능을 확인하는 중입니다.",
]

COMMENT_CONTENTS = [
    "좋은 글 감사합니다!",
    "공감합니다.",
    "테스트 댓글입니다.",
    "잘 읽었습니다.",
    "참고하겠습니다.",
    "도움이 됐어요.",
]
